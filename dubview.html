<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shulker Box Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Minecraft', 'Press Start 2P', monospace;
            background:  linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .shulker-container {
            background: rgba(139, 139, 139, 0.95);
            border:  3px solid #000;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            max-width: 600px;
        }

        .shulker-header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 5px;
            color: white;
            font-size: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(0, 0, 0, 0.3);
        }

        .shulker-header. Red { background-color: #B02E26; }
        .shulker-header.Orange { background-color: #F9801D; }
        .shulker-header.Yellow { background-color: #FED83D; }
        .shulker-header. Lime { background-color: #80C71F; }
        .shulker-header.Green { background-color: #5E7C16; }
        .shulker-header. Cyan { background-color: #169C9C; }
        .shulker-header.LightBlue { background-color:  #3AB3DA; }
        .shulker-header.Blue { background-color: #3C44AA; }
        .shulker-header.Purple { background-color: #8932B8; }
        .shulker-header. Magenta { background-color: #C74EBD; }
        .shulker-header.Pink { background-color: #F38BAA; }
        .shulker-header.White { background-color: #F9FFFE; color: #333; }
        .shulker-header.LightGray { background-color:  #9D9D97; }
        .shulker-header.Gray { background-color: #474F52; }
        .shulker-header.Black { background-color: #1D1D21; }
        .shulker-header. Brown { background-color: #835432; }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 4px;
            background: #8B8B8B;
            padding: 8px;
            border:  2px solid #000;
            border-radius: 4px;
        }

        .inventory-slot {
            aspect-ratio: 1;
            background: #373737;
            border: 2px solid #000;
            border-radius: 3px;
            position: relative;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .inventory-slot:hover {
            background: #4a4a4a;
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }

        .inventory-slot.empty {
            cursor: default;
        }

        .inventory-slot. empty:hover {
            background:  #373737;
            transform: none;
            box-shadow: none;
        }

        .item-icon {
            width: 80%;
            height: 80%;
            object-fit: contain;
            image-rendering: pixelated;
        }

        .item-count {
            position: absolute;
            bottom: 2px;
            right: 4px;
            color: white;
            font-size: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            font-weight: bold;
        }

        .tooltip {
            position: fixed;
            background: rgba(16, 0, 16, 0.95);
            border: 2px solid #2d0a63;
            border-radius: 4px;
            padding: 10px;
            color: white;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            max-width: 250px;
            display: none;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.7);
        }

        .tooltip.show {
            display: block;
        }

        .tooltip-name {
            color: #FFD700;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .tooltip-enchantment {
            color: #9F9F9F;
            margin:  3px 0;
            padding-left: 5px;
        }

        .tooltip-type {
            color: #AAAAAA;
            font-size: 10px;
            margin-top: 5px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="shulker-container">
        <div class="shulker-header" id="shulkerHeader">Shulker Box</div>
        <div class="inventory-grid" id="inventoryGrid"></div>
    </div>

    <div class="tooltip" id="tooltip">
        <div class="tooltip-name" id="tooltipName"></div>
        <div id="tooltipEnchantments"></div>
        <div class="tooltip-type" id="tooltipType"></div>
    </div>

    <script>
        // Parse the custom data format
        function parseShulkerData(dataString) {
            const shulkerMatch = dataString.match(/shulker\{\{name:'([^']+)',\s*color:'([^']+)'\}\}/);
            const shulkerInfo = {
                name: shulkerMatch ?  shulkerMatch[1] :  'Shulker Box',
                color: shulkerMatch ? shulkerMatch[2] : 'Purple'
            };

            const items = {};
            const itemPattern = /\((\d+),(\d+)\)\{item:([^: ]+):?\{? name:"([^"]+)"[^}]*\}?\}:\[(\d+)\]/g;
            
            let match;
            while ((match = itemPattern.exec(dataString)) !== null) {
                const row = parseInt(match[1]);
                const col = parseInt(match[2]);
                const itemType = match[3];
                const itemName = match[4];
                const count = parseInt(match[5]);
                
                items[`${row},${col}`] = {
                    type: itemType,
                    name: itemName,
                    count: count,
                    enchantments: [] // You can extend parsing for enchantments here
                };
            }

            return { shulkerInfo, items };
        }

        // Get item icon URL (using Minecraft item textures)
        function getItemIcon(itemType) {
            const itemName = itemType.replace('minecraft:', '');
            // Using a Minecraft texture CDN
            return `https://mc-heads.net/minecraft/item/${itemName}`;
        }

        // Render the shulker box
        function renderShulkerBox(dataString) {
            const { shulkerInfo, items } = parseShulkerData(dataString);
            
            // Set header
            const header = document.getElementById('shulkerHeader');
            header.textContent = shulkerInfo.name;
            header.className = 'shulker-header ' + shulkerInfo.color;

            // Create grid
            const grid = document.getElementById('inventoryGrid');
            grid.innerHTML = '';

            for (let row = 0; row < 3; row++) {
                for (let col = 0; col < 9; col++) {
                    const slot = document.createElement('div');
                    slot. className = 'inventory-slot';
                    
                    const itemData = items[`${row},${col}`];
                    
                    if (itemData) {
                        const icon = document.createElement('img');
                        icon.className = 'item-icon';
                        icon.src = getItemIcon(itemData.type);
                        icon.alt = itemData.name;
                        
                        slot.appendChild(icon);
                        
                        if (itemData.count > 1) {
                            const count = document.createElement('div');
                            count.className = 'item-count';
                            count. textContent = itemData.count;
                            slot.appendChild(count);
                        }

                        // Add hover events
                        slot.addEventListener('mouseenter', (e) => showTooltip(e, itemData));
                        slot.addEventListener('mousemove', (e) => moveTooltip(e));
                        slot.addEventListener('mouseleave', hideTooltip);
                    } else {
                        slot.classList.add('empty');
                    }
                    
                    grid.appendChild(slot);
                }
            }
        }

        // Tooltip functions
        function showTooltip(event, itemData) {
            const tooltip = document.getElementById('tooltip');
            const tooltipName = document.getElementById('tooltipName');
            const tooltipEnchantments = document.getElementById('tooltipEnchantments');
            const tooltipType = document.getElementById('tooltipType');

            tooltipName.textContent = itemData.name;
            
            if (itemData.enchantments && itemData.enchantments.length > 0) {
                tooltipEnchantments.innerHTML = itemData.enchantments
                    .map(e => `<div class="tooltip-enchantment">${e}</div>`)
                    .join('');
            } else {
                tooltipEnchantments.innerHTML = '';
            }

            tooltipType.textContent = itemData.type;
            
            tooltip.classList.add('show');
            moveTooltip(event);
        }

        function moveTooltip(event) {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.left = (event.clientX + 15) + 'px';
            tooltip.style.top = (event.clientY + 15) + 'px';
        }

        function hideTooltip() {
            const tooltip = document.getElementById('tooltip');
            tooltip.classList.remove('show');
        }

        // Example data - replace with your actual data
        const exampleData = `(1,0)shulker{{name:'my first test shulker', color:'Red'}\`(0,0){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(0,1){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(0,2){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(0,3){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(0,4){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(0,5){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(0,6){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(0,7){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(0,8){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(1,0){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(1,1){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(1,2){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(1,3){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(1,4){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(1,5){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(1,6){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(1,7){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(1,8){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(2,0){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(2,1){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(2,2){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(2,3){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(2,4){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(2,5){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(2,6){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(2,7){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`(2,8){item:minecraft:totem_of_undying:{name:"Axua's second live"}}:[1]\`}`;

        // Initialize
        renderShulkerBox(exampleData);

        // You can call renderShulkerBox() with new data to update the display
        // Example: renderShulkerBox(yourNewDataString);
    </script>
</body>
</html>
